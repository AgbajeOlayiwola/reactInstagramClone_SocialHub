(this.webpackJsonpmysocialapp=this.webpackJsonpmysocialapp||[]).push([[0],{142:function(e,t,n){},143:function(e,t,n){},152:function(e,t,n){},153:function(e,t,n){},154:function(e,t,n){},158:function(e,t,n){"use strict";n.r(t);var c=n(3),s=n(31),a=n.n(s),o=(n(78),n(79),n(80),n(6)),r=n(14),i=n.n(r),l=n(22),u=(n(82),n(17)),j=n.n(u),d=(n(140),n(45),j.a.initializeApp({apiKey:"AIzaSyAspTCB9TzQ5kFX-0nnnV303fM0yUdaTNY",authDomain:"mysocialapp-c2fa9.firebaseapp.com",projectId:"mysocialapp-c2fa9",storageBucket:"mysocialapp-c2fa9.appspot.com",messagingSenderId:"60580697483",appId:"1:60580697483:web:8452559d552bc08a334b8e"}).firestore()),p=j.a.auth(),m=j.a.storage(),b=new j.a.auth.GoogleAuthProvider,h=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.signInWithPopup(b).then((function(e){console.log(e.user),t=e.user})).catch((function(e){console.log(e.message)}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=n(2),O=Object(c.createContext)(),x=function(e){var t=Object(c.useState)(null),n=Object(o.a)(t,2),s=n[0],a=n[1];return Object(f.jsx)(O.Provider,{value:{user:[s,a]},children:e.children})};function g(){var e=Object(o.a)(Object(c.useContext)(O).user,2),t=(e[0],e[1]),n=function(){var e=Object(l.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:(n=e.sent)&&t(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"signInBtn",onClick:n,children:Object(f.jsx)("p",{children:"Sign in with google"})})}function v(e){var t=e.username,n=e.caption;return Object(f.jsx)("div",{className:"comment",children:Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{style:{fontWeight:"500",marginRight:"40px"},children:t}),n]})})}n(142);function y(){var e=Object(o.a)(Object(c.useContext)(O).user,2),t=e[0];e[1];return Object(f.jsxs)("div",{className:"navBar",children:[Object(f.jsx)("h1",{children:"Social Hub "}),t?Object(f.jsx)("img",{className:"navbar_img",alt:"",src:t.photoURL}):Object(f.jsx)(g,{})]})}n(143);var N=n(71),C=n.n(N);function L(){var e=Object(o.a)(Object(c.useContext)(O).user,2),t=e[0],n=(e[1],Object(c.useState)("")),s=Object(o.a)(n,2),a=s[0],r=s[1],i=Object(c.useState)(null),l=Object(o.a)(i,2),u=l[0],p=l[1],b=Object(c.useState)(0),h=Object(o.a)(b,2),x=h[0],v=h[1];return Object(f.jsx)("div",{className:"createPost",children:Object(f.jsx)("div",{className:"createPost_LoggedIn",children:t?Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{children:"Create A Post"}),Object(f.jsxs)("div",{className:"createpost_loggedincenter",children:[Object(f.jsx)("textarea",{className:"createpost_textarea",rows:"3",value:a,placeholder:"enter caption",onChange:function(e){return r(e.target.value)}}),Object(f.jsx)("div",{className:"cretePost_ImagePeview",children:Object(f.jsx)("img",{id:"image-preview",alt:""})})]}),Object(f.jsxs)("div",{className:"createpost_Bottom",children:[Object(f.jsxs)("div",{className:"createpost_addphoto",children:[Object(f.jsx)("label",{htmlFor:"fileInput",children:Object(f.jsx)(C.a,{style:{cursor:"Pointer",fontSize:"20px"}})}),Object(f.jsx)("input",{id:"fileInput",type:"file",accept:"image/*",onChange:function(e){if(e.target.files[0]){p(e.target.files[0]);var t=URL.createObjectURL(e.target.files[0]),n=document.getElementById("image-preview");n.src=t,n.style.display="block"}}})]}),Object(f.jsxs)("button",{className:"createpost_Uploadbtn",onClick:function(){if(u){var e=function(e){for(var t=[],n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=n.length,s=0;s<e;s++)t+=n.charAt(Math.floor(Math.random()*c));return t}(10);m.ref("images/".concat(e,".jpg")).put(u).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);v(t)}),(function(e){console.log(e)}),(function(){m.ref("images").child("".concat(e,".jpg")).getDownloadURL().then((function(e){d.collection("post").add({timestamp:j.a.firestore.FieldValue.serverTimestamp(),cption:a,photoURL:e,profilePhoto:t.photoURL,username:t.email.replace("@gmail.com","")})})),v(""),r(""),document.getElementById("image-preview").style.display="none"}))}},style:{color:a?"#000":"lightgrey",border:"none",cursor:"pointer"},children:[" ","Upload ".concat(0!=x?x:"")," "]})]})]}):Object(f.jsxs)("div",{children:[Object(f.jsx)(g,{}),Object(f.jsx)("p",{style:{marginLeft:"0px"},children:"to post and comment"})]})})})}n(152),n(153);function I(e){var t=e.comments,n=e.id,s=Object(c.useState)(""),a=Object(o.a)(s,2),r=a[0],i=a[1],l=Object(o.a)(Object(c.useContext)(O).user,2),u=l[0],j=(l[1],Object(c.useState)(t||[])),p=Object(o.a)(j,2),m=p[0];p[1];return Object(f.jsxs)("div",{className:"commentInput",children:[Object(f.jsx)("textarea",{placeholder:"Comment",className:"commentInput_textarea",rows:"1",value:r,onChange:function(e){return i(e.target.value)}}),Object(f.jsx)("button",{onClick:function(){""!=r&&m.push({comment:r,username:u.email.replace("@gmail.com","")}),d.collection("post").doc(n).update({comments:m}).then((function(){i(""),console.log("comment Added")})).catch((function(e){console.log("error ".concat(e))}))},className:"commentInput_Button",children:"Post"})]})}function _(e){var t=e.profileURL,n=e.username,s=e.id,a=e.photoURL,r=e.caption,i=e.comments,l=Object(o.a)(Object(c.useContext)(O).user,2),u=l[0];l[1];return Object(f.jsxs)("div",{className:"post",children:[Object(f.jsxs)("div",{className:"post_header",children:[Object(f.jsxs)("div",{className:"post_header_left",children:[Object(f.jsx)("img",{src:t,className:"post_headerPic"}),Object(f.jsx)("p",{style:{marginLeft:" 12px"},children:n})]}),u?Object(f.jsx)("button",{onClick:function(){m.refFromURL(a).delete().then((function(){console.log("deleted image")})).catch((function(e){console.log("error ".concat(e))})),d.collection("post").doc(s).delete().then((function(){console.log("post deleted successfully")})).catch((function(e){console.log("erro post info delete ".concat(e))}))},className:"button_delete",children:"Delete"}):Object(f.jsx)(f.Fragment,{})]}),Object(f.jsx)("div",{className:"post_center",children:Object(f.jsx)("img",{className:"post_photoURL",src:a})}),Object(f.jsx)("div",{children:Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{style:{fontWeight:"500",marginRight:"6px"},children:n}),r]})}),i?i.map((function(e){return Object(f.jsx)(v,{username:e.username,caption:e.comment})})):Object(f.jsx)("div",{}),u?Object(f.jsx)(I,{comments:i,id:s}):Object(f.jsx)(f.Fragment,{})]})}n(154);function w(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],s=t[1];return Object(c.useEffect)((function(){d.collection("post").onSnapshot((function(e){s(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),Object(f.jsx)("div",{className:"feed",children:n.map((function(e){var t=e.id,n=e.post;return Object(f.jsx)(_,{id:t,profileURL:n.profilePhoto,username:n.username,photoURL:n.photoURL,caption:n.cption,comments:n.comments},t)}))})}function U(){return Object(f.jsxs)("div",{className:"home",children:[Object(f.jsx)(L,{}),Object(f.jsx)(w,{})]})}var P=function(){return Object(f.jsx)(x,{children:Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(y,{}),Object(f.jsx)(U,{})]})})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,171)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),c(e),s(e),a(e),o(e)}))};a.a.render(Object(f.jsx)(P,{}),document.getElementById("root")),R()},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},82:function(e,t,n){}},[[158,1,2]]]);
//# sourceMappingURL=main.754add70.chunk.js.map